{"version":3,"file":"advisors.min.js","sources":["../src/advisors.js"],"sourcesContent":["import notification from 'core/notification';\nimport ajax from 'core/ajax';\nimport {get_string as getString} from 'core/str';\n\nexport const init = () => {\n    deleteAdvisor();\n};\n\n/**\n * Delete advisor\n */\nfunction deleteAdvisor() {\n    // Pop-up notification when .btn-local-organization-delete-advisor is clicked\n    document.querySelectorAll('.btn-local-organization-delete-advisor').forEach(button => {\n        button.addEventListener('click', function () {\n            // Get the data id attribute value\n            var id = this.getAttribute('data-id');\n            var role_id = this.getAttribute('data-role_id');\n            var context = this.getAttribute('data-context');\n            var row = this.closest('tr');\n            var delete_string = getString('delete', 'local_organization');\n            var delete_advisor = getString('delete_advisor', 'local_organization');\n            var cancel = getString('cancel', 'local_organization');\n            var could_not_delete_advisor = getString('could_not_delete_advisor', 'local_organization');\n            // Notification\n            notification.confirm(delete_string, delete_advisor, delete_string, cancel, function () {\n                // Delete the record\n                var deleteAdvisor = ajax.call([{\n                    methodname: 'organization_advisor_delete',\n                    args: {\n                        id: id,\n                        role_id: role_id,\n                        context: context\n                    }\n                }]);\n                deleteAdvisor[0].done(function () {\n                    row.remove();\n                }).fail(function () {\n                    notification.alert(could_not_delete_advisor);\n                });\n            });\n\n        });\n    });\n\n}"],"names":["document","querySelectorAll","forEach","button","addEventListener","id","this","getAttribute","role_id","context","row","closest","delete_string","delete_advisor","cancel","could_not_delete_advisor","confirm","ajax","call","methodname","args","done","remove","fail","alert"],"mappings":"8YAIoB,KAShBA,SAASC,iBAAiB,0CAA0CC,SAAQC,SACxEA,OAAOC,iBAAiB,SAAS,eAEzBC,GAAKC,KAAKC,aAAa,WACvBC,QAAUF,KAAKC,aAAa,gBAC5BE,QAAUH,KAAKC,aAAa,gBAC5BG,IAAMJ,KAAKK,QAAQ,MACnBC,eAAgB,mBAAU,SAAU,sBACpCC,gBAAiB,mBAAU,iBAAkB,sBAC7CC,QAAS,mBAAU,SAAU,sBAC7BC,0BAA2B,mBAAU,2BAA4B,4CAExDC,QAAQJ,cAAeC,eAAgBD,cAAeE,QAAQ,WAEnDG,cAAKC,KAAK,CAAC,CAC3BC,WAAY,8BACZC,KAAM,CACFf,GAAIA,GACJG,QAASA,QACTC,QAASA,YAGH,GAAGY,MAAK,WAClBX,IAAIY,YACLC,MAAK,iCACSC,MAAMT"}